<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TransferWise</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-100 text-slate-900">

<!-- LOGIN PAGE -->
<div id="loginPage" class="h-screen flex items-center justify-center">
  <div class="bg-white shadow-xl rounded-2xl p-8 w-96">
    <h2 class="text-2xl font-bold mb-4 text-center">TransferWise Login</h2>
    <input id="username" type="text" placeholder="Username" class="w-full border p-2 mb-3 rounded">
    <input id="password" type="password" placeholder="Password" class="w-full border p-2 mb-3 rounded">
    <button onclick="login()" class="w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700">Login</button>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hidden">
  <div class="max-w-4xl mx-auto p-6">
    <h1 class="text-3xl font-bold mb-2">Welcome to TransferWise</h1>
    <p id="greeting" class="text-lg mb-4"></p>
    <p class="mb-6">Date & Time: <span id="dateTime"></span></p>

    <!-- Balance -->
    <div class="bg-white p-6 rounded-2xl shadow mb-6">
      <h2 class="text-xl font-bold">Balance</h2>
      <p id="balance" class="text-2xl mt-2 font-mono">40,000€</p>
    </div>

    <!-- Transactions -->
    <div class="bg-white p-6 rounded-2xl shadow mb-6">
      <h2 class="text-xl font-bold mb-2">Recent Transactions</h2>
      <table class="w-full text-left border">
        <thead>
          <tr class="border-b">
            <th class="p-2">Amount</th>
            <th class="p-2">To</th>
            <th class="p-2">Details</th>
          </tr>
        </thead>
        <tbody id="transactionList"></tbody>
      </table>
    </div>

    <!-- Actions -->
    <div class="flex gap-4 mb-6">
      <button onclick="openTransfer()" class="bg-green-600 text-white px-4 py-2 rounded-xl hover:bg-green-700">Transfer</button>
      <button onclick="openWithdraw()" class="bg-orange-600 text-white px-4 py-2 rounded-xl hover:bg-orange-700">Withdraw</button>
    </div>

    <p class="text-sm text-gray-600">*Pending fee of 150€ will be charged on transfers.</p>
  </div>
</div>

<!-- TRANSFER/WITHDRAW MODAL -->
<div id="modal" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50">
  <div class="bg-white p-6 rounded-2xl shadow-xl w-96">
    <h2 id="modalTitle" class="text-xl font-bold mb-4"></h2>
    <select id="method" class="w-full border p-2 mb-3 rounded">
      <option value="PayPal">PayPal</option>
      <option value="Revolut">Revolut</option>
    </select>
    <input id="amount" type="number" placeholder="Amount (€)" class="w-full border p-2 mb-3 rounded">
    <button onclick="processTransaction()" class="w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700">Submit</button>
    <button onclick="closeModal()" class="w-full mt-2 bg-gray-300 p-2 rounded">Cancel</button>
  </div>
</div>

<!-- COMPLETE PAGE -->
<div id="completePage" class="hidden h-screen flex items-center justify-center">
  <div class="bg-white shadow-xl rounded-2xl p-8 w-96 text-center">
    <h2 class="text-2xl font-bold mb-4">Transaction Complete ✅</h2>
    <p class="mb-4">Your transaction has been processed successfully.</p>
    <button onclick="goHome()" class="bg-blue-600 text-white p-2 rounded w-full hover:bg-blue-700">Back to Home</button>
  </div>
</div>

<script>
let balance = 40000;
let currentAction = "";
let transactions = [];

// Load saved data
window.onload = () => {
  let savedBalance = localStorage.getItem("balance");
  let savedTransactions = localStorage.getItem("transactions");

  if (savedBalance !== null) balance = parseFloat(savedBalance);
  if (savedTransactions) transactions = JSON.parse(savedTransactions);

  updateUI();
};

// Save to localStorage
function saveData() {
  localStorage.setItem("balance", balance);
  localStorage.setItem("transactions", JSON.stringify(transactions));
}

// Login
function login() {
  document.getElementById("loginPage").classList.add("hidden");
  document.getElementById("dashboard").classList.remove("hidden");
  updateUI();
}

// Greeting + Date/Time
function updateDateTime() {
  let now = new Date();
  document.getElementById("dateTime").innerText = now.toLocaleString();
  let hour = now.getHours();
  let greeting = hour < 12 ? "Good Morning" : hour < 18 ? "Good Afternoon" : "Good Evening";
  document.getElementById("greeting").innerText = greeting;
}
setInterval(updateDateTime, 1000);

// UI update
function updateUI() {
  document.getElementById("balance").innerText = balance + "€";
  let list = document.getElementById("transactionList");
  list.innerHTML = "";
  transactions.forEach(t => {
    list.innerHTML += `<tr>
      <td class="p-2 text-red-600">-${t.amount}€</td>
      <td class="p-2">${t.method}</td>
      <td class="p-2">${t.details}</td>
    </tr>`;
  });
}

// Open transfer/withdraw modal
function openTransfer() {
  currentAction = "Transfer";
  document.getElementById("modalTitle").innerText = "New Transfer";
  document.getElementById("modal").classList.remove("hidden");
}
function openWithdraw() {
  currentAction = "Withdraw";
  document.getElementById("modalTitle").innerText = "New Withdrawal";
  document.getElementById("modal").classList.remove("hidden");
}
function closeModal() {
  document.getElementById("modal").classList.add("hidden");
}

// Process transaction
function processTransaction() {
  let amount = parseFloat(document.getElementById("amount").value);
  let method = document.getElementById("method").value;
  if (isNaN(amount) || amount <= 0) return alert("Enter valid amount.");

  let fee = 150;
  let total = amount + fee;

  if (balance < total) return alert("Insufficient balance.");

  balance -= total;

  transactions.push({
    amount: amount,
    method: method,
    details: `${currentAction} (Fee: 150€)`
  });

  saveData();
  updateUI();

  document.getElementById("modal").classList.add("hidden");
  document.getElementById("dashboard").classList.add("hidden");
  document.getElementById("completePage").classList.remove("hidden");
}

// Go back home
function goHome() {
  document.getElementById("completePage").classList.add("hidden");
  document.getElementById("dashboard").classList.remove("hidden");
}
</script>

</body>
</html>
