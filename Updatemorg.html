<!DOCTYPE html><html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>wisetransfer — Demo Bank</title>
  <style>
    :root{--bg:#f1f5f9;--card:#ffffff;--accent:#0b74de;--muted:#64748b}
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial}
    body{margin:0;background:var(--bg);color:#0f172a}
    .center{max-width:980px;margin:28px auto;padding:20px}
    header{display:flex;justify-content:space-between;align-items:center}
    .bank-name{font-weight:700;font-size:22px;color:var(--accent)}
    .card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 6px 18px rgba(2,6,23,0.06)}
    .login-wrap{max-width:420px;margin:60px auto}
    label{display:block;font-size:13px;margin:10px 0 6px}
    input,select{width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef8}
    button{background:var(--accent);color:#fff;border:none;padding:10px 14px;border-radius:8px;cursor:pointer}
    .row{display:flex;gap:12px}
    .col-2{flex:1}
    .small{font-size:13px;color:var(--muted)}
    table{width:100%;border-collapse:collapse;margin-top:10px}
    th,td{padding:8px;border-bottom:1px solid #eef2f7;text-align:left}
    .muted{color:var(--muted)}
    .actions{display:flex;gap:10px}
    .btn-ghost{background:transparent;border:1px solid #e6eef8;color:var(--accent)}
    .notice{background:#fffbeb;padding:10px;border-radius:8px;border:1px solid #fcefc7;color:#92400e;margin-bottom:12px}
    .success{background:#ecfeff;padding:12px;border-radius:10px;border:1px solid #c8f7f9;color:#0b6b6b}
    .tx-complete{max-width:720px;margin:30px auto;text-align:center}
    .tiny{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="center">
    <header>
      <div class="bank-name">wisetransfer</div>
      <div id="headerRight" class="small muted"></div>
    </header><!-- LOGIN PAGE -->
<div id="loginPage" class="card login-wrap">
  <h2>Welcome to <span style="color:var(--accent)">wisetransfer</span></h2>
  <p class="small muted">Login to access your account (demo, local-only)</p>
  <label for="username">Username</label>
  <input id="username" placeholder="enter username" />
  <label for="password">Password</label>
  <input id="password" type="password" placeholder="password" />
  <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
    <button id="loginBtn">Login</button>
    <button class="btn-ghost" id="demoBtn">Use demo user</button>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard" style="display:none;margin-top:18px">
  <div class="card">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div>
        <div id="greeting" style="font-size:18px;font-weight:600"></div>
        <div class="tiny" id="timeNow"></div>
      </div>
      <div style="text-align:right">
        <div class="small muted">Account balance</div>
        <div id="balance" style="font-size:20px;font-weight:700">€0.00</div>
        <div style="margin-top:8px" class="actions">
          <button id="transferBtn">Transfer</button>
          <button id="withdrawBtn" class="btn-ghost">Withdraw</button>
          <button id="logoutBtn" class="btn-ghost">Logout</button>
        </div>
      </div>
    </div>
  </div>

  <div style="display:grid;grid-template-columns:1fr 380px;gap:14px;margin-top:14px">
    <div>
      <div class="card">
        <h3>Make a transfer / withdrawal</h3>
        <div class="notice">A flat charge of <strong>€150</strong> applies to every transfer or withdrawal. Please ensure your PayPal or Revolut details are correct before submitting.</div>

        <label for="mode">Operation</label>
        <select id="mode">
          <option value="transfer">Transfer</option>
          <option value="withdraw">Withdraw</option>
        </select>

        <label for="method">Method</label>
        <select id="method">
          <option value="paypal">PayPal</option>
          <option value="revolut">Revolut</option>
        </select>

        <label for="destDetails">PayPal / Revolut details</label>
        <input id="destDetails" placeholder="email for PayPal or phone/IBAN for Revolut" />

        <label for="amount">Amount (€)</label>
        <input id="amount" type="number" placeholder="0.00" min="1" />

        <div style="margin-top:12px;display:flex;gap:8px">
          <button id="submitTx">Submit</button>
          <button id="clearForm" class="btn-ghost">Clear</button>
        </div>
        <div id="formMsg" class="tiny" style="margin-top:8px;color:#b91c1c"></div>
      </div>

      <div class="card" style="margin-top:12px">
        <h3>Recent transactions</h3>
        <table>
          <thead><tr><th>Date</th><th>Type</th><th>Method</th><th>Details</th><th>Amount</th></tr></thead>
          <tbody id="txTable">
          </tbody>
        </table>
        <div id="noTx" class="tiny muted" style="margin-top:8px">No transactions yet.</div>
      </div>
    </div>

    <div>
      <div class="card">
        <h3>Account info</h3>
        <p class="small muted">Name: <span id="acctName">-</span></p>
        <p class="small muted">Account ID: <span id="acctId">-</span></p>
        <p class="small muted">Default currency: EUR</p>
        <div style="margin-top:10px" class="tiny muted">Disclaimer: This is a local demo page. Do not enter real credentials you care about.</div>
      </div>

      <div class="card" style="margin-top:12px">
        <h3>Quick actions</h3>
        <div style="display:flex;flex-direction:column;gap:8px">
          <button id="quick5">Send €5</button>
          <button id="quick100">Send €100</button>
          <button id="quick1000">Send €1,000</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- TRANSACTION COMPLETE -->
<div id="txComplete" style="display:none" class="tx-complete card">
  <h2>Transaction complete</h2>
  <p id="txSummary" class="small muted"></p>
  <div id="txSuccess" class="success" style="margin-top:10px"></div>
  <div style="margin-top:12px" class="tiny muted">You will be returned to the dashboard shortly.</div>
  <div style="margin-top:12px"><button id="backHome">Return now</button></div>
</div>

  </div>  <script>
    // --- Utilities
    const FEE = 150;
    const LS_BAL = 'wt_balance_v1';
    const LS_TX = 'wt_txs_v1';
    const LS_USER = 'wt_user_v1';

    function formatEUR(n){
      return '€' + Number(n).toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2});
    }

    function nowStr(){
      return new Date().toLocaleString();
    }

    // --- State init
    if(!localStorage.getItem(LS_BAL)) localStorage.setItem(LS_BAL, JSON.stringify(40000));
    if(!localStorage.getItem(LS_TX)) localStorage.setItem(LS_TX, JSON.stringify([]));

    // DOM
    const loginPage = document.getElementById('loginPage');
    const dashboard = document.getElementById('dashboard');
    const txComplete = document.getElementById('txComplete');
    const headerRight = document.getElementById('headerRight');

    const usernameInput = document.getElementById('username');
    const passwordInput = document.getElementById('password');
    const loginBtn = document.getElementById('loginBtn');
    const demoBtn = document.getElementById('demoBtn');

    const greeting = document.getElementById('greeting');
    const timeNow = document.getElementById('timeNow');
    const balanceEl = document.getElementById('balance');
    const acctNameEl = document.getElementById('acctName');
    const acctIdEl = document.getElementById('acctId');

    const logoutBtn = document.getElementById('logoutBtn');
    const transferBtn = document.getElementById('transferBtn');
    const withdrawBtn = document.getElementById('withdrawBtn');

    const modeSel = document.getElementById('mode');
    const methodSel = document.getElementById('method');
    const destDetails = document.getElementById('destDetails');
    const amountInput = document.getElementById('amount');
    const submitTx = document.getElementById('submitTx');
    const clearForm = document.getElementById('clearForm');
    const formMsg = document.getElementById('formMsg');

    const txTable = document.getElementById('txTable');
    const noTx = document.getElementById('noTx');

    const backHome = document.getElementById('backHome');
    const txSummary = document.getElementById('txSummary');
    const txSuccess = document.getElementById('txSuccess');

    // Quick buttons
    document.getElementById('quick5').addEventListener('click', ()=>{amountInput.value=5;modeSel.value='transfer';methodSel.value='paypal'});
    document.getElementById('quick100').addEventListener('click', ()=>{amountInput.value=100;modeSel.value='transfer';methodSel.value='revolut'});
    document.getElementById('quick1000').addEventListener('click', ()=>{amountInput.value=1000;modeSel.value='withdraw';methodSel.value='revolut'});

    // --- Auth
    function gotoDashboard(){
      loginPage.style.display='none';
      txComplete.style.display='none';
      dashboard.style.display='block';
      headerRight.textContent = 'Signed in';
      renderDashboard();
      startClock();
    }

    function renderDashboard(){
      const bal = Number(JSON.parse(localStorage.getItem(LS_BAL)));
      balanceEl.textContent = formatEUR(bal);
      const user = JSON.parse(localStorage.getItem(LS_USER)) || {name:'Demo User',id:'WIS-'+Math.floor(Math.random()*9000+1000)};
      acctNameEl.textContent = user.name;
      acctIdEl.textContent = user.id;
      greeting.textContent = `Good ${greetTime()}, ${user.name}`;
      renderTxTable();
    }

    function greetTime(){
      const h = new Date().getHours();
      if(h<12) return 'morning';
      if(h<18) return 'afternoon';
      return 'evening';
    }

    function startClock(){
      timeNow.textContent = nowStr();
      clearInterval(window._wtClock);
      window._wtClock = setInterval(()=> timeNow.textContent = nowStr(),1000);
    }

    loginBtn.addEventListener('click', ()=>{
      const u = usernameInput.value.trim();
      const p = passwordInput.value;
      if(!u || !p){alert('Enter username and password');return}
      const user = {name:u,id:'WIS-'+Math.floor(Math.random()*900000)};
      localStorage.setItem(LS_USER, JSON.stringify(user));
      gotoDashboard();
    });

    demoBtn.addEventListener('click', ()=>{
      const user = {name:'Demo User',id:'WIS-1001'};
      localStorage.setItem(LS_USER, JSON.stringify(user));
      gotoDashboard();
    });

    logoutBtn.addEventListener('click', ()=>{
      localStorage.removeItem(LS_USER);
      dashboard.style.display='none';
      loginPage.style.display='block';
      headerRight.textContent = '';
      clearInterval(window._wtClock);
    });

    // --- Transactions
    function renderTxTable(){
      const txs = JSON.parse(localStorage.getItem(LS_TX) || '[]');
      txTable.innerHTML = '';
      if(txs.length===0){noTx.style.display='block';return} else {noTx.style.display='none'}
      txs.slice().reverse().forEach(tx=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${tx.when}</td><td>${tx.type}</td><td>${tx.method}</td><td class="tiny">${tx.details}</td><td>${formatEUR(tx.amount)}</td>`;
        txTable.appendChild(tr);
      });
    }

    function submitTransaction(){
      formMsg.textContent='';
      const mode = modeSel.value; const method = methodSel.value; const details = destDetails.value.trim();
      const amt = Number(amountInput.value);
      if(!details){formMsg.textContent='Enter PayPal or Revolut details.';return}
      if(!amt || amt<=0){formMsg.textContent='Enter valid amount.';return}

      const bal = Number(JSON.parse(localStorage.getItem(LS_BAL)));
      const total = amt + FEE;
      if(total > bal){formMsg.textContent=`Insufficient funds — required ${formatEUR(total)} (including €${FEE} fee).`;return}

      // Create tx
      const tx = {when:nowStr(),type:mode,method:method,details:details,amount:amt};
      const txs = JSON.parse(localStorage.getItem(LS_TX) || '[]');
      txs.push(tx);
      localStorage.setItem(LS_TX, JSON.stringify(txs));

      // Deduct
      localStorage.setItem(LS_BAL, JSON.stringify(bal - total));

      // Show complete screen
      showTxComplete(tx, FEE);
      renderDashboard();
      amountInput.value=''; destDetails.value='';
    }

    submitTx.addEventListener('click', submitTransaction);
    clearForm.addEventListener('click', ()=>{amountInput.value='';destDetails.value='';formMsg.textContent='';});

    transferBtn.addEventListener('click', ()=>{modeSel.value='transfer';document.getElementById('amount').focus();});
    withdrawBtn.addEventListener('click', ()=>{modeSel.value='withdraw';document.getElementById('amount').focus();});

    function showTxComplete(tx, fee){
      dashboard.style.display='none';
      txComplete.style.display='block';
      txSummary.textContent = `${tx.type.toUpperCase()} — ${tx.method} (${tx.details}) \nAmount: ${formatEUR(tx.amount)}  Fee: ${formatEUR(fee)}  Total debited: ${formatEUR(tx.amount + fee)}`;
      txSuccess.textContent = `Successful: ${tx.type} of ${formatEUR(tx.amount)} to ${tx.details}.`;
      // auto return after 4 seconds
      window._returnTimer && clearTimeout(window._returnTimer);
      window._returnTimer = setTimeout(()=>{txComplete.style.display='none';dashboard.style.display='block';renderDashboard()},4000);
    }

    backHome.addEventListener('click', ()=>{txComplete.style.display='none';dashboard.style.display='block';renderDashboard();});

    function initFromState(){
      const user = JSON.parse(localStorage.getItem(LS_USER));
      if(user) gotoDashboard();
      else {loginPage.style.display='block';dashboard.style.display='none';}
      // show balance in header too for quick glance
      const bal = Number(JSON.parse(localStorage.getItem(LS_BAL)));
      headerRight.textContent = user ? `Signed in — ${formatEUR(bal)}` : '';
      renderTxTable();
    }

    // init
    initFromState();

    // keyboard: enter to login
    passwordInput.addEventListener('keydown', (e)=>{if(e.key==='Enter') loginBtn.click();});
  </script></body>
</html>
